{"ast":null,"code":"var _jsxFileName = \"A:\\\\Coder-house\\\\react\\\\proyecto final\\\\my-app\\\\src\\\\components\\\\Form\\\\Form.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      name: '',\n      age: null,\n      address: '',\n      phoneNo: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    const {\n      email,\n      name,\n      age,\n      address,\n      phoneNo\n    } = this.state;\n    event.preventDefault();\n    alert(`\n      ____Your Details____\\n\n      Email : ${email}\n      Name : ${name}\n      Age : ${age}\n      Address : ${address}\n      Phone No : ${phoneNo}\n    `);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  if(orderId) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Gracias por tu compra, tu n\\xFAmero de seguimiento es $\", orderId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          placeholder: \"Email\",\n          value: this.state.email,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \"Nombre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          placeholder: \"Name\",\n          value: this.state.name,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"address\",\n          children: \"Direccion de Entrega\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"address\",\n          placeholder: \"Address\",\n          value: this.state.address,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"phoneNo\",\n          children: \"Numero Telefonico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"phoneNo\",\n          placeholder: \"Phone No\",\n          value: this.state.phoneNo,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Enviar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Form;\n/*import {\r\n    addDoc,\r\n    collection,\r\n    documentId,\r\n    getDocs,\r\n    query,\r\n    serverTimestamp,\r\n    where,\r\n    writeBatch,\r\n} from 'firebase/firestore';\r\nimport { useContext, useState } from 'react';\r\nimport { CartContext } from '../../context/CartContext';\r\nimport { db } from '../../services/firebaseConfig';\r\n\r\nconst Form = () => {\r\n    const [name, setName] = useState('');\r\n    const [lastName, setLastName] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [orderId, setOrderId] = useState('');\r\n\r\n    const { cart, total, deleteAll } = useContext(CartContext);\r\n\r\n    const totalPrice = total();\r\n\r\n    const handleSubmit = async (e) => {\r\n        setLoading(true);\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const order = {\r\n                buyer: { name, lastName },\r\n                items: cart,\r\n                total: totalPrice,\r\n                date: serverTimestamp(),\r\n            };\r\n\r\n            const ids = cart.map((prod) => prod.id);\r\n\r\n            const productsRef = collection(db, 'productos');\r\n\r\n            const productsAddedFromFirestore = await getDocs(\r\n                query(productsRef, where(documentId(), 'in', ids))\r\n            );\r\n\r\n            const { docs } = productsAddedFromFirestore;\r\n\r\n            const outOfStock = [];\r\n\r\n            const batch = writeBatch(db);\r\n\r\n            docs.forEach((doc) => {\r\n                const dataDoc = doc.data();\r\n                const stockDB = dataDoc.stock;\r\n\r\n                const productAddedToCart = cart.find(\r\n                    (prod) => prod.id === doc.id\r\n                );\r\n\r\n                const prodQuantity = productAddedToCart?.cantidad;\r\n\r\n                if (stockDB >= prodQuantity) {\r\n                    batch.update(doc.ref, { stock: stockDB - prodQuantity });\r\n                } else {\r\n                    outOfStock.push({ id: doc.id, ...dataDoc });\r\n                }\r\n            });\r\n\r\n            if (outOfStock.length === 0) {\r\n                batch.commit();\r\n\r\n                const orderRef = collection(db, 'orders');\r\n                const orderAdded = await addDoc(orderRef, order);\r\n                setOrderId(orderAdded.id);\r\n                deleteAll();\r\n            } else {\r\n                console.log('No hay stock de algún producto');\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleChangeName = (e) => {\r\n        setName(e.target.value);\r\n    };\r\n\r\n    const handleChangeLastName = (e) => {\r\n        setLastName(e.target.value);\r\n    };\r\n\r\n    if (orderId) {\r\n        return (\r\n            <h1>\r\n                Gracias por tu compra, tu número de seguimiento es ${orderId}\r\n            </h1>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                minHeight: '70vh',\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n            }}\r\n        >\r\n            <form onSubmit={handleSubmit} action=\"\">\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"nombre\"\r\n                    placeholder=\"Nombre...\"\r\n                    onChange={handleChangeName}\r\n                    value={name}\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"apellido\"\r\n                    placeholder=\"Apellido...\"\r\n                    onChange={handleChangeLastName}\r\n                    value={lastName}\r\n                />\r\n                <button>{loading ? 'Enviando...' : 'Enviar'}</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Form;*/","map":{"version":3,"names":["React","Component","Form","constructor","props","state","email","name","age","address","phoneNo","handleChange","bind","handleSubmit","event","preventDefault","alert","setState","target","value","if","orderId","render"],"sources":["A:/Coder-house/react/proyecto final/my-app/src/components/Form/Form.js"],"sourcesContent":["import React,{ Component } from 'react'\r\n\r\nclass Form extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = { email:'',name:'', age:null, address:'',phoneNo:''}\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n  handleSubmit(event){\r\n    const { email, name, age, address, phoneNo } = this.state\r\n    event.preventDefault()\r\n    alert(`\r\n      ____Your Details____\\n\r\n      Email : ${email}\r\n      Name : ${name}\r\n      Age : ${age}\r\n      Address : ${address}\r\n      Phone No : ${phoneNo}\r\n    `)\r\n  }\r\n  handleChange(event){\r\n    this.setState({\r\n      [event.target.name] : event.target.value\r\n    })\r\n}\r\nif (orderId) {\r\n    return (\r\n        <h1>\r\n            Gracias por tu compra, tu número de seguimiento es ${orderId}\r\n        </h1>\r\n    );\r\n}\r\n  render(){\r\n    return(\r\n      <form onSubmit={this.handleSubmit} className=\"form\">\r\n        <div>\r\n          <label htmlFor='email'>Email</label>\r\n          <input \r\n            name='email'\r\n            placeholder='Email' \r\n            value = {this.state.email}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor='name'>Nombre</label>\r\n          <input\r\n            name='name' \r\n            placeholder='Name'\r\n            value={this.state.name}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor='address'>Direccion de Entrega</label>\r\n          <input\r\n            name='address' \r\n            placeholder='Address'\r\n            value={this.state.address}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor='phoneNo'>Numero Telefonico</label>\r\n          <input\r\n            name='phoneNo' \r\n            placeholder='Phone No'\r\n            value={this.state.phoneNo}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button>Enviar</button>\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n  \r\nexport default Form\r\n\r\n/*import {\r\n    addDoc,\r\n    collection,\r\n    documentId,\r\n    getDocs,\r\n    query,\r\n    serverTimestamp,\r\n    where,\r\n    writeBatch,\r\n} from 'firebase/firestore';\r\nimport { useContext, useState } from 'react';\r\nimport { CartContext } from '../../context/CartContext';\r\nimport { db } from '../../services/firebaseConfig';\r\n\r\nconst Form = () => {\r\n    const [name, setName] = useState('');\r\n    const [lastName, setLastName] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [orderId, setOrderId] = useState('');\r\n\r\n    const { cart, total, deleteAll } = useContext(CartContext);\r\n\r\n    const totalPrice = total();\r\n\r\n    const handleSubmit = async (e) => {\r\n        setLoading(true);\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const order = {\r\n                buyer: { name, lastName },\r\n                items: cart,\r\n                total: totalPrice,\r\n                date: serverTimestamp(),\r\n            };\r\n\r\n            const ids = cart.map((prod) => prod.id);\r\n\r\n            const productsRef = collection(db, 'productos');\r\n\r\n            const productsAddedFromFirestore = await getDocs(\r\n                query(productsRef, where(documentId(), 'in', ids))\r\n            );\r\n\r\n            const { docs } = productsAddedFromFirestore;\r\n\r\n            const outOfStock = [];\r\n\r\n            const batch = writeBatch(db);\r\n\r\n            docs.forEach((doc) => {\r\n                const dataDoc = doc.data();\r\n                const stockDB = dataDoc.stock;\r\n\r\n                const productAddedToCart = cart.find(\r\n                    (prod) => prod.id === doc.id\r\n                );\r\n\r\n                const prodQuantity = productAddedToCart?.cantidad;\r\n\r\n                if (stockDB >= prodQuantity) {\r\n                    batch.update(doc.ref, { stock: stockDB - prodQuantity });\r\n                } else {\r\n                    outOfStock.push({ id: doc.id, ...dataDoc });\r\n                }\r\n            });\r\n\r\n            if (outOfStock.length === 0) {\r\n                batch.commit();\r\n\r\n                const orderRef = collection(db, 'orders');\r\n                const orderAdded = await addDoc(orderRef, order);\r\n                setOrderId(orderAdded.id);\r\n                deleteAll();\r\n            } else {\r\n                console.log('No hay stock de algún producto');\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleChangeName = (e) => {\r\n        setName(e.target.value);\r\n    };\r\n\r\n    const handleChangeLastName = (e) => {\r\n        setLastName(e.target.value);\r\n    };\r\n\r\n    if (orderId) {\r\n        return (\r\n            <h1>\r\n                Gracias por tu compra, tu número de seguimiento es ${orderId}\r\n            </h1>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                minHeight: '70vh',\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n            }}\r\n        >\r\n            <form onSubmit={handleSubmit} action=\"\">\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"nombre\"\r\n                    placeholder=\"Nombre...\"\r\n                    onChange={handleChangeName}\r\n                    value={name}\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"apellido\"\r\n                    placeholder=\"Apellido...\"\r\n                    onChange={handleChangeLastName}\r\n                    value={lastName}\r\n                />\r\n                <button>{loading ? 'Enviando...' : 'Enviar'}</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Form;*/"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;;;AAEA,MAAMC,IAAN,SAAmBD,SAAnB,CAA4B;EAC1BE,WAAW,CAACC,KAAD,EAAO;IAChB,MAAMA,KAAN;IACA,KAAKC,KAAL,GAAa;MAAEC,KAAK,EAAC,EAAR;MAAWC,IAAI,EAAC,EAAhB;MAAoBC,GAAG,EAAC,IAAxB;MAA8BC,OAAO,EAAC,EAAtC;MAAyCC,OAAO,EAAC;IAAjD,CAAb;IACA,KAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;IACA,KAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;EACD;;EACDC,YAAY,CAACC,KAAD,EAAO;IACjB,MAAM;MAAER,KAAF;MAASC,IAAT;MAAeC,GAAf;MAAoBC,OAApB;MAA6BC;IAA7B,IAAyC,KAAKL,KAApD;IACAS,KAAK,CAACC,cAAN;IACAC,KAAK,CAAE;AACX;AACA,gBAAgBV,KAAM;AACtB,eAAeC,IAAK;AACpB,cAAcC,GAAI;AAClB,kBAAkBC,OAAQ;AAC1B,mBAAmBC,OAAQ;AAC3B,KAPS,CAAL;EAQD;;EACDC,YAAY,CAACG,KAAD,EAAO;IACjB,KAAKG,QAAL,CAAc;MACZ,CAACH,KAAK,CAACI,MAAN,CAAaX,IAAd,GAAsBO,KAAK,CAACI,MAAN,CAAaC;IADvB,CAAd;EAGH;;EACDC,EAAE,CAAEC,OAAF,EAAW;IACT,oBACI;MAAA,sEACyDA,OADzD;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ;EAKH;;EACCC,MAAM,GAAE;IACN,oBACE;MAAM,QAAQ,EAAE,KAAKT,YAArB;MAAmC,SAAS,EAAC,MAA7C;MAAA,wBACE;QAAA,wBACE;UAAO,OAAO,EAAC,OAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,IAAI,EAAC,OADP;UAEE,WAAW,EAAC,OAFd;UAGE,KAAK,EAAI,KAAKR,KAAL,CAAWC,KAHtB;UAIE,QAAQ,EAAE,KAAKK;QAJjB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAUE;QAAA,wBACE;UAAO,OAAO,EAAC,MAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,IAAI,EAAC,MADP;UAEE,WAAW,EAAC,MAFd;UAGE,KAAK,EAAE,KAAKN,KAAL,CAAWE,IAHpB;UAIE,QAAQ,EAAE,KAAKI;QAJjB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAVF,eAmBE;QAAA,wBACE;UAAO,OAAO,EAAC,SAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,IAAI,EAAC,SADP;UAEE,WAAW,EAAC,SAFd;UAGE,KAAK,EAAE,KAAKN,KAAL,CAAWI,OAHpB;UAIE,QAAQ,EAAE,KAAKE;QAJjB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAnBF,eA4BE;QAAA,wBACE;UAAO,OAAO,EAAC,SAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,IAAI,EAAC,SADP;UAEE,WAAW,EAAC,UAFd;UAGE,KAAK,EAAE,KAAKN,KAAL,CAAWK,OAHpB;UAIE,QAAQ,EAAE,KAAKC;QAJjB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QA5BF,eAqCE;QAAA,uBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QArCF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EA2CD;;AA3EyB;;AA8E5B,eAAeT,IAAf;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}